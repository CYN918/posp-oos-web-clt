(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{193:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(197),r=a.n(n),i=window.GLOBAL,c=function(){function e(){this.$request=void 0,this.dataMethodDefaults=void 0,this.$request=r.a.create({baseURL:i.hostUri,timeout:1e4,headers:{token:"1234","Content-Type":"application/json"}}),this.$request.interceptors.response.use(function(e){return e.data},function(e){return Promise.reject(e)})}return e.prototype.request=function(e,t,a){return this.$request.post("/rest/main/"+e,t).then(a)},e}()},396:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a.n(n),i=a(33),c=a(1),o=(a(247),a(390)),l=(a(221),a(245)),s=(a(188),a(185)),u=(a(176),a(183)),h=(a(177),a(184)),m=(a(178),a(186)),d=(a(179),a(187)),p=(a(100),a(174)),g=a(175),f=a.n(g),v=a(180),b=a.n(v),C=(a(181),a(189)),y=a(182),E=a.n(y),w=(a(207),a(206)),R=a(193),k=function(e){return e},I=function(e){var t=e.HEAD,a=e.BODY;if("000"===t.CODE){var n=a.rows;n.forEach(function(e,t){e.key=t});var r=["agentName","mobile","idCard","createTime","invitationCode","parentName","sumAgent","sumSn","sumActivation","sumAmount","state"].map(function(e){var t={title:"",dataIndex:e,key:e};switch(e){case"agentName":t.title="名称";break;case"mobile":t.title="手机号";break;case"idCard":t.title="身份证号";break;case"createTime":t.title="加入时间";break;case"invitationCode":t.title="邀请码";break;case"parentName":t.title="上级代理";break;case"sumAgent":t.title="渠道数";break;case"sumSn":t.title="终端数";break;case"sumActivation":t.title="激活数";break;case"sumAmount":t.title="总交易";break;case"state":t.title="状态",t.render=function(e){switch(e){case 1:return"正常";case 10:return"已冻结";default:return""}}}return t});e.BODY.header=r,e.BODY.rows=n}return e},P=new(function(e){function t(){return e.apply(this,arguments)||this}r()(t,e);var a=t.prototype;return a.AGT_001=function(e){return this.request("AGT_001",e,I)},a.AGT_007=function(e){return this.request("AGT_007",e,k)},a.AGT_003=function(e){return this.request("AGT_003",e,k)},a.AGT_005=function(e){return this.request("AGT_005",f()({},e,{type:2}),k)},a.AGT_006=function(e){return this.request("AGT_006",e,k)},a.AGT_008=function(e){return this.request("AGT_008",e,k)},t}(R.a)),A=w.a.Option,D=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).searchParam={mobile:"",agentName:"",currentPage:1,pageSize:10},t.state={visible:!1,policy:[],header:[],items:[],modalLoading:!1,tableLoading:!1,policyLoading:!1,pagination:{total:0,current:0,pageSize:t.searchParam.size},currentItem:{},btnDisabled:!0},t.searchPolicy=E()(b.a.mark(function e(){var a,n,r,i,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.AGT_007();case 2:a=e.sent,n=a.HEAD,r=a.BODY,i=n.MSG,"000"===n.CODE?(c=r.rows,t.setState({policy:c})):C.a.error(i);case 7:case"end":return e.stop()}},e)})),t.loadPolicy=function(){var e=E()(b.a.mark(function e(a){var n,r,i,c,o,l,s,u;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({policyLoading:!0}),n=t.state.currentItem.agentId,r=void 0===n?"":n,e.next=4,P.AGT_008({agentId:r,policyId:a});case 4:i=e.sent,c=i.HEAD,o=i.BODY,l=c.MSG,"000"===c.CODE?(s=o.rows)?t.setState({currentItem:s,policyLoading:!1,btnDisabled:!0}):(u={agentId:r,policyId:a},t.setState({currentItem:u,policyLoading:!1,btnDisabled:!1})):C.a.error(l);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t.getItem=function(e){var a={};return t.state.items.forEach(function(t){t.agentId===e&&(a=t)}),a},t.searchData=E()(b.a.mark(function e(){var a,n,r,i,c,o,l,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({tableLoading:!0}),e.next=3,P.AGT_001(t.searchParam);case 3:a=e.sent,n=a.HEAD,r=a.BODY,i=n.MSG,"000"===n.CODE?(c=r.header,o=r.rows,l=r.total,(s=f()({},t.state.pagination)).total=l,c.push({title:"操作",dataIndex:"agentId",key:"agentId",fixed:"right",width:250,render:function(e){var a=t.getItem(e);return console.log(a),React.createElement("div",{className:"btn-group"},React.createElement(p.a,{size:"small",onClick:t.freeze(a)},10===a.state?"解冻":"冻结"),React.createElement(p.a,{style:{marginLeft:10},size:"small",onClick:t.setParam(a)},"设置参数"),React.createElement(p.a,{style:{marginLeft:10},size:"small",onClick:t.resetPwd(a)},"重置密码"))}}),t.setState({header:c,items:o,tableLoading:!1,pagination:s})):C.a.error(i);case 8:case"end":return e.stop()}},e)})),t.freeze=function(e){return E()(b.a.mark(function a(){var n,r,i,c,o;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.setState({tableLoading:!0}),n=e.state,r=e.mobile,a.next=4,P.AGT_003({mobile:r,state:1===n?10:1});case 4:i=a.sent,c=i.HEAD,o=c.MSG,"000"===c.CODE?t.searchData():C.a.error(o);case 8:case"end":return a.stop()}},a)}))},t.setParam=function(e){return function(){var a=e.agentId;console.log(a),t.setState({visible:!0,currentItem:{agentId:a}})}},t.resetPwd=function(e){return E()(b.a.mark(function a(){var n,r,i,c;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.setState({tableLoading:!0}),n=e.mobile,a.next=4,P.AGT_005({mobile:n});case 4:r=a.sent,i=r.HEAD,c=i.MSG,"000"===i.CODE?t.searchData():C.a.error(c);case 8:case"end":return a.stop()}},a)}))},t.handleChange=function(e){return function(a){console.log("change value "+e+":"+a.target.value),t.searchParam[e]=a.target.value}},t.handleTableChange=function(e){t.searchParam.currentPage=e.current,t.setState({pagination:e},function(){t.searchData()})},t.handleOk=function(){t.setState({modalLoading:!0}),setTimeout(function(){t.setState({modalLoading:!1,visible:!1})},3e3)},t.handleCancel=function(){t.setState({visible:!1})},t.handleChangeParam=function(e){return function(a){var n=Object.assign({},t.state.currentItem);switch(e){case"policyId":console.log("change value "+e+":"+a),n[e]!==a&&t.loadPolicy(a),n[e]=a;break;default:console.log("change value "+e+":"+a.target.value),n[e]=a.target.value,t.setState({currentItem:n})}}},t}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){this.searchData(),this.searchPolicy()},a.render=function(){var e=this.state,t=e.header,a=e.items,n=e.tableLoading,r=e.pagination;return React.createElement(c.Fragment,null,React.createElement(u.a,null,React.createElement(h.a,{span:8},React.createElement(m.a.Item,{label:"手机号",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(d.a,{placeholder:"请输入手机号",onChange:this.handleChange("mobile")}))),React.createElement(h.a,{span:8},React.createElement(m.a.Item,{label:"代理商名称",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(d.a,{placeholder:"请输入代理商名称",onChange:this.handleChange("agentName")}))),React.createElement(h.a,{span:8},React.createElement(p.a,{type:"primary",style:{marginTop:4,position:"absolute",right:0},onClick:this.searchData},"查询"))),React.createElement(s.a,{columns:t,onChange:this.handleTableChange,pagination:r,loading:n,dataSource:a,scroll:{x:2e3},size:"middle"}),this.renderModal())},a.renderModal=function(){var e=this.state,t=e.visible,a=e.modalLoading,n=e.policy,r=e.policyLoading,i=e.currentItem,c=void 0===i?{}:i,s=e.btnDisabled,u=c.agentRate,h=void 0===u?"":u,g=c.txnRate,f=void 0===g?"":g,v=c.activationPrice,b=void 0===v?"":v,C=c.vipPrice,y=void 0===C?"":C,E=c.activityPrice,R=void 0===E?"":E,k=c.agentFee,I=void 0===k?"":k,P=c.txnFee,D=void 0===P?"":P;return React.createElement(o.a,{visible:t,title:"设置参数",onOk:this.handleOk,onCancel:this.handleCancel,width:1e3,footer:[React.createElement(p.a,{key:"back",onClick:this.handleCancel},"取消"),React.createElement(p.a,{key:"submit",type:"primary",disabled:s,loading:a,onClick:this.handleOk},"确定")]},React.createElement(l.a,{tip:"加载中...",spinning:r},React.createElement(m.a.Item,{label:"政策",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(w.a,{value:c.policyId,onChange:this.handleChangeParam("policyId"),style:{width:300}},n.map(function(e,t){var a=e.policyId,n=e.name;return React.createElement(A,{key:t,value:a},n)}))),React.createElement(m.a.Item,{label:"代理商费率（刷卡支付）",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(d.a,{value:h,onChange:this.handleChangeParam("agentRate"),style:{width:300}}),"+",React.createElement(d.a,{value:I,onChange:this.handleChangeParam("agentFee"),style:{width:300}})),React.createElement(m.a.Item,{label:"用户费率（刷卡支付）",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(d.a,{value:f,onChange:this.handleChangeParam("txnRate"),style:{width:300}}),"+",React.createElement(d.a,{value:D,onChange:this.handleChangeParam("txnFee"),style:{width:300}})),React.createElement(m.a.Item,{label:"激活返现",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(d.a,{value:b,onChange:this.handleChangeParam("activationPrice"),style:{width:300}})),React.createElement(m.a.Item,{label:"VIP返现",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(d.a,{value:y,onChange:this.handleChangeParam("vipPrice"),style:{width:300}})),React.createElement(m.a.Item,{label:"活动返现",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(d.a,{value:R,onChange:this.handleChangeParam("activityPrice"),style:{width:300}}))))},t}(c.Component);a.d(t,"default",function(){return S});var S=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){var e=this.props.match;return React.createElement("div",null,React.createElement(i.Switch,null,React.createElement(i.Route,{path:e.url+"/agentManagement",component:function(e){return React.createElement(D,e)}})))},t}(c.Component)}}]);