(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{193:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(197),r=a.n(n),c=window.GLOBAL,o=function(){function e(){this.$request=void 0,this.dataMethodDefaults=void 0,this.$request=r.a.create({baseURL:c.hostUri,timeout:1e4,headers:{token:"1234","Content-Type":"application/json"}}),this.$request.interceptors.response.use(function(e){return e.data},function(e){return Promise.reject(e)})}return e.prototype.request=function(e,t,a){return this.$request.post("/rest/main/"+e,t).then(a)},e}()},393:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a.n(n),c=a(33),o=a(1),i=(a(188),a(185)),s=(a(179),a(187)),l=(a(176),a(183)),u=(a(100),a(174)),p=(a(177),a(184)),h=(a(178),a(186)),m=a(180),d=a.n(m),g=(a(181),a(189)),f=a(175),E=a.n(f),y=a(182),R=a.n(y),S=(a(207),a(206)),v=a(193),C=function(e){return e},b=function(e){var t=e.HEAD,a=e.BODY;if("000"===t.CODE){var n=a.rows;n.forEach(function(e,t){e.key=t});var r=["startSn","endSn","total","name","state","anentName","createTime"].map(function(e){var t={title:"",dataIndex:e,key:e};switch(e){case"startSn":t.title="终端号始";break;case"endSn":t.title="终端号末";break;case"total":t.title="数量";break;case"name":t.title="政策类型";break;case"state":t.title="终端状态",t.render=function(e){switch(e){case 1:return"下拨中";case 2:return"已下拨";case 10:return"已失效";default:return""}};break;case"anentName":t.title="库存单位";break;case"createTime":t.title="入库时间"}return t});e.BODY.header=r,e.BODY.rows=n}return e},w=new(function(e){function t(){return e.apply(this,arguments)||this}r()(t,e);var a=t.prototype;return a.POS_001=function(e){return this.request("POS_001",e,b)},a.AGT_007=function(e){return this.request("AGT_007",e,C)},a.POS_002=function(e){return this.request("POS_001",e,C)},t}(v.a)),D=S.a.Option,k=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).searchParam={policyName:"",currentPage:1,pageSize:10},t.storageParam={policyId:"",startSn:"",endSn:""},t.state={header:[],items:[],tableLoading:!1,btnLoading:!1,policy:[],pagination:{total:0,current:0,pageSize:t.searchParam.size}},t.getItem=function(e){var a={};return t.state.items.forEach(function(t){t.agentId===e&&(a=t)}),a},t.searchData=R()(d.a.mark(function e(){var a,n,r,c,o,i,s,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({tableLoading:!0}),e.next=3,w.POS_001(t.searchParam);case 3:a=e.sent,n=a.HEAD,r=a.BODY,c=n.MSG,"000"===n.CODE?(o=r.header,i=r.rows,s=r.total,(l=E()({},t.state.pagination)).total=s,t.setState({header:o,items:i,tableLoading:!1,pagination:l})):g.a.error(c);case 8:case"end":return e.stop()}},e)})),t.searchPolicy=R()(d.a.mark(function e(){var a,n,r,c,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({policyLoading:!0}),e.next=3,w.AGT_007();case 3:a=e.sent,n=a.HEAD,r=a.BODY,c=n.MSG,"000"===n.CODE?(o=r.rows,t.setState({policy:o,policyLoading:!1})):(g.a.error(c),t.setState({policyLoading:!1}));case 8:case"end":return e.stop()}},e)})),t.handleTableChange=function(e){t.searchParam.currentPage=e.current,t.setState({pagination:e},function(){t.searchData()})},t.handleChange=function(e){return function(a){console.log("change value "+e+":"+a.target.value),t.searchParam[e]=a.target.value}},t.handleStorage=R()(d.a.mark(function e(){var a,n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({btnLoading:!0}),e.next=3,w.AGT_007(t.storageParam);case 3:a=e.sent,n=a.HEAD,r=n.MSG,"000"===n.CODE?(t.setState({btnLoading:!1}),t.searchData()):(g.a.error(r),t.setState({btnLoading:!1}));case 7:case"end":return e.stop()}},e)})),t.handleChangeStorage=function(e){return function(a){switch(e){case"policyId":t.storageParam[e]=a;break;default:console.log("change value "+e+":"+a.target.value),t.storageParam[e]=a.target.value}}},t}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){this.searchData(),this.searchPolicy()},a.render=function(){var e=this.state,t=e.header,a=e.items,n=e.tableLoading,r=e.pagination,c=e.policy,m=e.policyLoading,d=e.btnLoading;return React.createElement(o.Fragment,null,React.createElement(l.a,null,React.createElement(p.a,{span:7},React.createElement(h.a.Item,{label:"政策类型",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(S.a,{onChange:this.handleChange("policyId"),style:{width:"100%"},loading:m},c.map(function(e,t){var a=e.policyId,n=e.name;return React.createElement(D,{key:t,value:a},n)})))),React.createElement(p.a,{span:14}),React.createElement(p.a,{span:3},React.createElement(u.a,{type:"primary",style:{marginTop:4,position:"absolute",right:0},onClick:this.searchData},"查询"))),React.createElement(l.a,null,React.createElement(p.a,{span:7},React.createElement(h.a.Item,{label:"序列号始",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(s.a,{placeholder:"请输入序列号始",onChange:this.handleChangeStorage("startSn")}))),React.createElement(p.a,{span:7},React.createElement(h.a.Item,{label:"序列号末尾",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(s.a,{placeholder:"请输入序列号末尾",onChange:this.handleChangeStorage("endSn")}))),React.createElement(p.a,{span:7},React.createElement(h.a.Item,{label:"入库政策",labelCol:{span:6},wrapperCol:{span:16}},React.createElement(S.a,{onChange:this.handleChangeStorage("policyId"),style:{width:"100%"},loading:m},c.map(function(e,t){var a=e.policyId,n=e.name;return React.createElement(D,{key:t,value:a},n)})))),React.createElement(p.a,{span:3},React.createElement(u.a,{type:"primary",style:{marginTop:4,position:"absolute",right:0},onClick:this.handleStorage,loading:d},"确定入库"))),React.createElement(i.a,{columns:t,onChange:this.handleTableChange,pagination:r,loading:n,dataSource:a,scroll:{x:2e3},size:"middle"}))},t}(o.Component),P=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){return React.createElement("div",null,"terminalTransfer")},t}(o.Component),L=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){return React.createElement("div",null,"TransferRecord")},t}(o.Component);a.d(t,"default",function(){return O});var O=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){var e=this.props.match;return React.createElement("div",null,React.createElement(c.Switch,null,React.createElement(c.Route,{path:e.url+"/terminalStorage",component:function(e){return React.createElement(k,e)}}),React.createElement(c.Route,{path:e.url+"/terminalTransfer",component:function(e){return React.createElement(P,e)}}),React.createElement(c.Route,{path:e.url+"/transferRecord",component:function(e){return React.createElement(L,e)}})))},t}(o.Component)}}]);